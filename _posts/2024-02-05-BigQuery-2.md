---
layout: post
title: BigQuery ì¿¼ë¦¬ í•„ìˆ˜ ìš”ì†Œ (ì •ë¦¬ì¤‘)
subtitle: ë„ì„œ êµ¬ê¸€ ë¹…ì¿¼ë¦¬ ì™„ë²½ ê°€ì´ë“œ ìŠ¤í„°ë””
author: san9hyun
categories: BigQuery
banner : /assets/images/banners/squirrel.jpg
tags: BigQuery ë¹…ì¿¼ë¦¬
---


> ğŸ§‘ ë„ì„œ [ë°œë¦¬ì•„íŒŒ ë½ì‰¬ë§ˆë‚œ,ì¡°ë˜ í‹°ê°€ë‹ˆ "êµ¬ê¸€ ë¹…ì¿¼ë¦¬ ì™„ë²½ ê°€ì´ë“œ" Oâ€™Reilly]ë¥¼ ê°œì¸ì ìœ¼ë¡œ ê³µë¶€í•œ ê²ƒì…ë‹ˆë‹¤.

## ì¿¼ë¦¬ í•„ìˆ˜ ìš”ì†Œ ì •ë¦¬

### 1.WITH ì ˆ 

> â›³ï¸ ë¹…ì¿¼ë¦¬ì—ì„œ WITH êµ¬ë¬¸ì€ ì„ì‹œ í…Œì´ë¸”ì„ ìƒì„±í•˜ì§€ ì•ŠëŠ”ë‹¤!

```
SELECT * FROM (
  SELECT
    gender, tripduration / 60 AS minutes
  FROM
    `bigquery-public-data`.new_york_citibike.citibike_trips
)

WHERE minutes < 10 -- ë°”ê¹¥ìª½ì˜ SELECTëŠ” ì•ˆìª½ì˜ ì„œë¸Œ ì¿¼ë¦¬ì˜ ê²°ê³¼ë¥¼ ì°¸ì¡°í•˜ê¸° ë•Œë¬¸ì—, ì„œë¸Œì¿¼ë¦¬ê°€ ì‚¬ìš©í•œ ë³„ì¹­ì„ WHEREì ˆì—ë„ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.
LIMIT 5   
```

ìœ„ì™€ ê°™ì€ ì„œë¸Œì¿¼ë¦¬ ëŒ€ì‹  WITHì ˆì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. <br>
WITHì ˆì„ ì‚¬ìš©í•˜ë©´ ê°€ë…ì„±ì´ ë†’ì•„ì§€ê³ , ì¬ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.<br>

```
WITH all_trips AS (
  SELECT
    gender, tripduration / 60 AS minutes
  FROM
    `bigquery-public-data`.new_york_citibike.citibike_trips
)

SELECT * FROM all_trips
WHERE minutes < 10 
LIMIT 5   
```

ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë§ì€ DBë“¤ì´ ìœ„ì™€ ê°™ì€ WITH êµ¬ë¬¸ì„ ì§€ì›í•œë‹¤.
ê·¸ëŸ°ë° WITH êµ¬ë¬¸ëŠ” ê°€ìƒì˜ í…Œì´ë¸”ì„ ìƒì„±í•˜ì—¬ ë©”ëª¨ë¦¬ì— í• ë‹¹í•˜ê¸° ë–„ë¬¸ì— ì„±ëŠ¥ ë¬¸ì œê°€ ë°œìƒí• ìˆ˜ë„ ìˆë‹¤.

í•˜ì§€ë§Œ, 
ë¹…ì¿¼ë¦¬ì—ì„œ WITH êµ¬ë¬¸ì€ ì´ë¦„ì´ ìˆëŠ” ì„œë¸Œì¿¼ë¦¬ ì²˜ëŸ¼ ì‘ë™í•˜ë©° ì„ì‹œ í…Œì´ë¸”ì„ ìƒì„±í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—(p62)<br>
ì„±ëŠ¥ì´ìŠˆë¥¼ í¬ê²Œ ê±±ì •í•˜ì§€ ì•Šì•„ë„ ëœë‹¤ê³  í•œë‹¤.

